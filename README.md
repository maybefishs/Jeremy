# LunchVote+

**產品定位：老師 5 分鐘上線、每天省 20 分鐘統計**

「讓午餐變簡單，一鍵投票、一鍵下單、一鍵交接」。LunchVote+ 是為班級午餐協調打造的漸進式網頁應用（PWA），支援投票決策、點餐統計、收款追蹤與備份，專為 LINE 為核心的溝通流程設計。

## 功能特色
- 模式切換：投票/直接下單模式，自動計算截單時間。
- LINE 優先：任何階段皆可產生一鍵複製的 LINE 摘要與電話摘要。
- 點餐管理：個人/班級總額、未付款名單一目了然。
- Caller 支援：預訂提醒、付款狀態快速標記與 Undo。
- 管理後台：名單、餐廳、菜單 CRUD，備份/還原與危險操作防呆。
- 儀表板：Chart.js 圖表顯示人氣、日總額與付款狀態。
- PWA：可安裝到桌面，支援離線快取與更新提示。

## 快速開始
1. 將本專案部署到 GitHub Pages（建議 main 分支啟用 Pages）。
2. 首次進入 `admin.html`，設定密碼 PIN 並完成三步驟設定精靈：
   - 匯入名單：支援貼上文字或上傳 CSV。
   - 選擇模式、日期與時區（預設 Asia/Taipei）。
   - 產生 QR 海報 PNG，印出張貼給學生掃描。
3. 透過 `index.html` 讓學生投票/下單，`caller.html` 由值日生追蹤收款，`dashboard.html` 檢視統計。

## 操作流程
### 模式與時程
- 投票模式：
  - 投票截止：前一日 17:00。
  - 下單截止：當日 10:00。
- 直接下單模式：
  - 若餐廳需預訂，則前一日 17:00 截止；否則當日 10:00。
- 超過下單截止後自動切換為結果階段。

### Caller 值日生
- 16:30 自動提醒預訂（Toast）。
- 17:00 顯示紅色橫幅提醒並提供電話摘要複製。
- 確認付款支援 5 秒 Undo。

### 管理員
- 名單/餐廳/菜單皆支援「停售/售完」狀態。
- 可設定是否啟用備份，備份目標 URL、立即備份與還原。
- 提供清除 30 天前資料的操作（需確認兩次）。

## 備份與 Google 試算表
- `settings.backup` 可設定為 Google Apps Script 的 webhook。每天 10:05 會自動 POST JSON 備份。
- README 中另提供未來串接 Google Sheets 的建議：
  - 建立試算表與 Apps Script 接收 POST。
  - Apps Script 需回傳 `{"ok":true}`。
  - `loadDataFromServer()` 可接收 GET/POST 回應並更新本地資料。

## PWA 安裝
- 於瀏覽器選擇「安裝 LunchVote+」即可離線使用。
- 新版釋出時，Service Worker 會顯示更新提示。

## 截圖
請參考 `docs/screenshots/`（自行新增）以供操作教學與家長說明。

## 備份/還原
- 在 `admin.html` 可匯出 CSV、JSON 備份，或呼叫遠端備份。
- 本系統所有資料僅存在使用者瀏覽器，請務必定期備份。

## 授權與隱私
- 採用 [MIT License](./LICENSE)。
- 隱私聲明參見 [PRIVACY.md](./PRIVACY.md)。
