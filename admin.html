<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LunchVote+ 管理後台 v2.0</title>
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/utc.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/plugin/timezone.js"></script>
</head>
<body data-page="admin">
    <header class="top-bar">
        <div class="brand">
            <span class="badge badge-accent">管理後台 v2.0</span>
            <h1>LunchVote+ Admin</h1>
            <p class="tagline">模組化菜單管理系統</p>
        </div>
    </header>

    <main>
        <section class="card shell">
            <h2>營運設定</h2>
            <form id="settingsForm" class="settings-grid">
                </form>
        </section>

        <section class="card shell">
            <h2>名單管理</h2>
            <div class="names-import">
                </div>
            <ul id="namesList" class="names-list"></ul>
        </section>

        <section class="card shell">
            <h2>餐廳與菜單 (v2.0)</h2>
            <select id="restaurantSelect" class="field-group">
                <option value="">請先選擇要編輯的餐廳</option>
            </select>

            <div id="menuEditorV2" class="hidden">
                <h3>分類管理</h3>
                <form id="categoryForm" class="category-form">
                    <input type="text" id="categoryName" placeholder="輸入分類名稱 (e.g., 麵類)" required/>
                    <button type="submit" class="ghost">新增分類</button>
                </form>
                <div id="categoryContainer" class="category-container">
                    </div>
            </div>
        </section>
        
        <section class="card shell">
            <h2>備份與維運</h2>
            </section>
    </main>

    <div id="itemEditorModal" class="modal hidden">
        <div class="modal-content">
            <h2 id="modalTitle">編輯品項</h2>
            <form id="itemEditorForm">
                <input type="hidden" name="itemId">
                <input type="hidden" name="categoryId">
                
                <label>品項名稱: <input type="text" name="name" required></label>
                <label>基礎價格: <input type="number" name="basePrice" required min="0"></label>
                <label>單位 (e.g., 顆, 份): <input type="text" name="unit"></label>
                <label>圖片網址: <input type="url" name="imageUrl" placeholder="https://..."></label>

                <hr>
                <h3>選項群組</h3>
                <div id="optionGroupsContainer"></div>
                <button type="button" id="addOptionGroupBtn" class="ghost">新增選項群組</button>
                
                <div class="modal-actions">
                    <button type="button" class="ghost" onclick="document.getElementById('itemEditorModal').classList.add('hidden')">取消</button>
                    <button type="submit" class="primary">儲存品項</button>
                </div>
            </form>
        </div>
    </div>

    <div id="pinModal" class="modal">
        </div>

    <script type="module" src="./app.js"></script>
    <script type="module" src="./admin.js"></script>
</body>
</html>
